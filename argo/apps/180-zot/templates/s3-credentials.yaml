apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: zot-s3-credentials
spec:
  refreshInterval: 300s # Refresh every 5 minutes
  secretStoreRef:
    name: vault-backend
    kind: ClusterSecretStore
  data:
   - secretKey: AWS_ACCESS_KEY_ID # Standard AWS SDK environment variable
     remoteRef:
       key: platform/s3-credentials  # Path in Vault
       property: ACCESS_KEY_ID  # Property to extract from the Vault secret
   - secretKey: AWS_SECRET_ACCESS_KEY # Standard AWS SDK environment variable
     remoteRef:
       key: platform/s3-credentials  # Path in Vault
       property: SECRET_ACCESS_KEY  # Property to extract from the Vault secret
   - secretKey: AWS_REGION # Standard AWS SDK environment variable
     remoteRef:
       key: platform/s3-credentials  # Path in Vault
       property: REGION  # Property to extract from the Vault secret
   - secretKey: AWS_ENDPOINT_URL # Standard AWS SDK environment variable for custom endpoints
     remoteRef:
       key: platform/s3-credentials  # Path in Vault
       property: ENDPOINT  # Property to extract from the Vault secret 